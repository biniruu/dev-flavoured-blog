---
title: Socket.io ì—ì„œ emitting ì´ë²¤íŠ¸ ì‘ì„± ì‹œ ë°œìƒí•˜ëŠ” íƒ€ì… ì—ëŸ¬ í•´ê²°í•˜ê¸°
date: 2023-12-13
description: ë„ˆë¬´ ì‰½ê²Œ í•´ê²°í•  ìˆ˜ ìˆì–´ì„œ ê¸€ë¡œ ì“°ê¸°ì—ë„ ë¯¼ë§í•  ì •ë„ë¼ë‹ˆê¹Œìš”.
tags:
  - socket
  - TypeScript
  - Error
---

Socket.ioì™€ íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ ì›¹ì†Œì¼“ ê¸°ëŠ¥ì„ êµ¬í˜„í•  ë•Œ eimtting ì´ë²¤íŠ¸ë¥¼ ì‘ì„±í•˜ë©´ íƒ€ì… ì—ëŸ¬ê°€ ë°œìƒí•´ìš”.

Socket.io ê³µì‹ ì‚¬ì´íŠ¸ì—ì„œ ì œê³µí•˜ëŠ” íŠœí† ë¦¬ì–¼ ì½”ë“œë¥¼ ë³´ë©´ì„œ ì´ì•¼ê¸°í• ê²Œìš”.

<br />

```typescript
// íƒ€ì… ì •ì˜

export interface ServerToClientEvents {
  ...
}

export interface ClientToServerEvents {
  hello: () => void
}

export interface InterServerEvents {
  ...
}

export interface SocketData {
  ...
}
```

<br />

```typescript
// í”„ë¡ íŠ¸ì—”ë“œ ì½”ë“œ

const socket = io()

const form = document.getElementById('form')
const input = document.getElementById('input')

form.addEventListener('submit', e => {
  e.preventDefault()

  if (input.value) {
    socket.emit('chat message', input.value)
    input.value = ''
  }
})
```

<br />

```typescript
// ë°±ì—”ë“œ ì½”ë“œ

const app = express()
const server = createServer(app)

const io = new Server<ClientToServerEvents, ServerToClientEvents, InterServerEvents, SocketData>(server)

io.on('connection', socket => {
  // ì—ëŸ¬ ë°œìƒ
  // Argument of type '"chat message"' is not assignable to parameter of type 'ReservedOrUserEventNames<SocketReservedEventsMap, ClientToServerEvents>'.
  socket.on('chat message', msg => {
    console.log('message:', msg)
  })
})
```

<br />

ìœ„ì—ì„œ ë³´ëŠ” ê²ƒì²˜ëŸ¼ í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ë°œìƒì‹œí‚¨ 'chat message'ë¼ëŠ” ì´ë²¤íŠ¸ë¥¼ ë°±ì—”ë“œì—ì„œ ì´ë²¤íŠ¸ë¥¼ ë°›ëŠ” ë¶€ë¶„ì—ì„œ íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ ê´€ë ¨ ì—ëŸ¬ê°€ ë°œìƒí–ˆì–´ìš”.

ì´ ì—ëŸ¬ëŠ” `ClientToServerEvents` ì¸í„°í˜ì´ìŠ¤ì— í•´ë‹¹ ì´ë²¤íŠ¸ê°€ ì •ì˜ë˜ì–´ ìˆì§€ ì•Šê¸° ë•Œë¬¸ì— ë°œìƒí•˜ê³  ìˆì–´ìš”. ë”°ë¼ì„œ 'chat message' ì´ë²¤íŠ¸ë¥¼ ì¶”ê°€í•´ì£¼ë©´ ì—ëŸ¬ê°€ ì‚¬ë¼ì ¸ìš”.

<br />

```typescript
// íƒ€ì… ì •ì˜

export interface ClientToServerEvents {
  hello: () => void
  'chat message': (msg: string) => void
}
```

<br />

ì´ ë°©ë²•ì´ ë²ˆê±°ë¡­ë‹¤ë©´ ì•„ë˜ì²˜ëŸ¼ ë­ë“  í—ˆìš©ë˜ëŠ” í”„ë¡œí¼í‹°ë¥¼ ë§Œë“¤ë©´ ë˜ê² ì£ ?ğŸ˜…

<br />

```typescript
// íƒ€ì… ì •ì˜

export interface ClientToServerEvents {
  [key: string]: (prop: any) => void
}
```
